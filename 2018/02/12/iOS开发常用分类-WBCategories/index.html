<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">



  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />





  <script>
  (function(i,s,o,g,r,a,m){i["DaoVoiceObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;a.charset="utf-8";m.parentNode.insertBefore(a,m)})(window,document,"script",('https:' == document.location.protocol ? 'https:' : 'http:') + "//widget.daovoice.io/widget/0f81ff2f.js","daovoice")
  daovoice('init', {
      app_id: "98f7f72d"
    });
  daovoice('update');
  </script>














  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="iOS," />





  <link rel="alternate" href="/atom.xml" title="WenBo丨星空灬" type="application/atom+xml" />






<meta name="description" content="前言 You use categories to define additional methods of an existing class—even one whose source code is unavailable to you—without subclassing. You typically use a category to add methods to an existing">
<meta name="keywords" content="iOS">
<meta property="og:type" content="article">
<meta property="og:title" content="iOS开发常用分类-WBCategories">
<meta property="og:url" content="http://blogwenbo.com/2018/02/12/iOS开发常用分类-WBCategories/index.html">
<meta property="og:site_name" content="WenBo丨星空灬">
<meta property="og:description" content="前言 You use categories to define additional methods of an existing class—even one whose source code is unavailable to you—without subclassing. You typically use a category to add methods to an existing">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2018-02-12T09:48:39.117Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="iOS开发常用分类-WBCategories">
<meta name="twitter:description" content="前言 You use categories to define additional methods of an existing class—even one whose source code is unavailable to you—without subclassing. You typically use a category to add methods to an existing">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://blogwenbo.com/2018/02/12/iOS开发常用分类-WBCategories/"/>





  <title>iOS开发常用分类-WBCategories | WenBo丨星空灬</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>
<a href="https://github.com/wenmobo" class="github-corner" aria-label="View source on Github"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">WenBo丨星空灬</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">To strive, to seek, to find, and not to yield.</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://blogwenbo.com/2018/02/12/iOS开发常用分类-WBCategories/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="WenBo">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://upload.jianshu.io/users/upload_avatars/3072214/ccbcba49-0a5c-4b7e-b1e4-aea15ab4419f.png?imageMogr2/auto-orient/strip|imageView2/1/w/240/h/240">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="WenBo丨星空灬">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">iOS开发常用分类-WBCategories</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-02-12T17:45:51+08:00">
                2018-02-12
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/iOS/" itemprop="url" rel="index">
                    <span itemprop="name">iOS</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2018/02/12/iOS开发常用分类-WBCategories/" class="leancloud_visitors" data-flag-title="iOS开发常用分类-WBCategories">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">热度&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
		<span>℃</span>
             </span>
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  2,327
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  11
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><blockquote>
<p>You use categories to define additional methods of an existing class—even one whose source code is unavailable to you—without subclassing. You typically use a category to add methods to an existing class, such as one defined in the Cocoa frameworks. The added methods are inherited by subclasses and are indistinguishable at runtime from the original methods of the class. You can also use categories of your own classes to:</p>
<ul>
<li>Distribute the implementation of your own classes into separate source files—for example, you could group the methods of a large class into several categories and put each category in a different file.</li>
<li>Declare private methods.</li>
</ul>
<p>You add methods to a class by declaring them in an interface file under a category name and defining them in an implementation file under the same name. The category name indicates that the methods are an extension to a class declared elsewhere, not a new class.</p>
</blockquote>
<a id="more"></a>
<p>上面是苹果文档对Category的描述，在日常开发过程中，我们也经常用到分类。分类（Category）是OC中的特有语法，它是表示一个指向分类的结构体的指针。原则上它只能增加方法，不能增加成员（实例）变量。关于Category的博文，我也推荐一两篇博文吧，也可自己查找相关的资料：</p>
<ul>
<li><a href="https://www.jianshu.com/p/535d1574cb86" target="_blank" rel="noopener">iOS 关于Category</a></li>
<li><a href="https://www.jianshu.com/p/e917e7d95f69" target="_blank" rel="noopener">ios-category解析</a><h3 id="WBCategories"><a href="#WBCategories" class="headerlink" title="WBCategories"></a>WBCategories</h3>GitHub请戳：<a href="https://github.com/wenmobo/WBCategories" target="_blank" rel="noopener">WBCategories</a><br>从最开始和同事一起做项目，到独立做项目，自己在空闲时间整理了项目开发过程中常用分类，分类文件主要包含系统框架如下：<blockquote>
<ul>
<li>UIKit</li>
<li>Foundation</li>
<li>AVFoundation</li>
<li>CoreTelephony</li>
<li>QuartzCore</li>
</ul>
</blockquote>
</li>
</ul>
<p>最开始这些分类文件也挺零散的，大部分分类方法都是在网上查询资料，也参考了一些大神在Github上开源库，比如：<a href="https://github.com/shaojiankui/JKCategories" target="_blank" rel="noopener">JKCategories</a>、<a href="https://github.com/ibireme/YYCategories" target="_blank" rel="noopener">YYCategories</a>等优秀开源库，这两个库整理的分类方法也相当的完善，开发中常用的方法都包含了，在这里非常感谢大神的无私分享。</p>
<h3 id="常用分类方法"><a href="#常用分类方法" class="headerlink" title="常用分类方法"></a>常用分类方法</h3><p>WBCategories参考整理了许多优秀分类方法，有很多也是自己平时在开发项目中记录整理，比如自己开发过程使用的宏定义也包含在这个项目中。其实最开始我也想用这个项目制作一个pod库，但考虑到在实际项目开发过程中，并不是所有的分类文件都用到，而是需要哪些拷贝到项目中就可以了。等以后有时间制作一个pod开源库吧，现在的水平还是达不到😄。不过这个项目我也会持续更新。下面介绍一些自己在项目中开发用的比较多的方法吧！</p>
<h3 id="Foundation"><a href="#Foundation" class="headerlink" title="Foundation"></a>Foundation</h3><h4 id="NSString"><a href="#NSString" class="headerlink" title="NSString"></a>NSString</h4><ul>
<li><p>计算文字size（使用较多）</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  计算文字size</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *  <span class="doctag">@param</span> size 限制size</span></span><br><span class="line"><span class="comment"> *  <span class="doctag">@param</span> font 字体</span></span><br><span class="line"><span class="comment"> *  <span class="doctag">@param</span> lineBreakMode 换行格式</span></span><br><span class="line"><span class="comment"> *  <span class="doctag">@return</span> 文字size</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (CGSize)<span class="string">wb_sizeForFont:</span>(UIFont *)font</span><br><span class="line"><span class="symbol">                    size:</span>(CGSize)size</span><br><span class="line"><span class="symbol">                    mode:</span>(NSLineBreakMode)lineBreakMode;</span><br></pre></td></tr></table></figure>
</li>
<li><p>UIWebView自适应图片高度（使用较多）</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> Auto fit image height,font size</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> <span class="doctag">@param</span> htmlString htmlString description</span></span><br><span class="line"><span class="comment"> <span class="doctag">@param</span> fontSize The font szie</span></span><br><span class="line"><span class="comment"> <span class="doctag">@return</span> return value description</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">+ (NSString *)wb_autoFitImageSize:(NSString *)htmlString</span><br><span class="line">                         fontSize:(CGFloat)fontSize;</span><br></pre></td></tr></table></figure>
</li>
<li><p>判断字符串非空</p>
<figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  判断是否为空字符串（使用较多）</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">+ (<span class="keyword">BOOL)wb_isNull:(NSString </span>*)object<span class="comment">;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="NSObject"><a href="#NSObject" class="headerlink" title="NSObject"></a>NSObject</h4><ul>
<li><p>json字符串转化NSArray/NSDictionary（使用较多）</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> json字符串转化NSArray/NSDictionary</span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment"> <span class="doctag">@param</span> jsonString json字符串</span></span><br><span class="line"><span class="comment"> <span class="doctag">@return</span> NSArray/NSDictionary</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">+ (id)<span class="string">wb_jsonStringToObject:</span>(NSString *)jsonString;</span><br></pre></td></tr></table></figure>
</li>
<li><p>NSArray/NSDictionary转json字符串（使用较多）</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> NSArray/NSDictionary转json字符串</span><br><span class="line"> </span><br><span class="line"> @param object NSArray/NSDictionary</span><br><span class="line"> @<span class="literal">return</span> json字符串</span><br><span class="line"> */</span><br><span class="line">+ (<span class="built_in">id</span>)wb_objectConvertToJsonSting:(<span class="built_in">id</span>)object;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="NSDate"><a href="#NSDate" class="headerlink" title="NSDate"></a>NSDate</h4><ul>
<li>通过时间戳计算时间差（使用较多）<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  通过时间戳计算时间差</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *  @param compareDate 时间戳</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">+ (<span class="built_in">NSString</span> *)wb_compareCurrentTime:(<span class="built_in">NSTimeInterval</span>) compareDate;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="UIKit"><a href="#UIKit" class="headerlink" title="UIKit"></a>UIKit</h3><h4 id="UINavigationItem"><a href="#UINavigationItem" class="headerlink" title="UINavigationItem"></a>UINavigationItem</h4><ul>
<li>设置导航按钮左右间距，适配iOS11（使用较多）<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">UINavigationItem</span> (<span class="title">Margin</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">assign</span>) <span class="built_in">CGFloat</span> leftMargin;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">assign</span>) <span class="built_in">CGFloat</span> rightMargin;</span><br><span class="line"></span><br><span class="line">+ (<span class="built_in">CGFloat</span>)systemMargin;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="UIButton"><a href="#UIButton" class="headerlink" title="UIButton"></a>UIButton</h4><ul>
<li><p>扩大按钮点击区域（使用较多）</p>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">assign</span>) <span class="built_in">UIEdgeInsets</span> wb_touchAreaInsets;</span><br></pre></td></tr></table></figure>
</li>
<li><p>按钮倒计时（使用较多）</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  设置按钮倒计时</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *  <span class="doctag">@param</span> time 倒计时时间</span></span><br><span class="line"><span class="comment"> *  <span class="doctag">@param</span> button 对象按钮</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">+ (<span class="keyword">void</span>)<span class="string">wb_showCountDownTime:</span>(NSUInteger)time</span><br><span class="line"><span class="symbol">                    inButton:</span>(UIButton *)button;</span><br></pre></td></tr></table></figure>
</li>
<li><p>调整按钮图片位置（使用较多）</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> 利用UIButton的titleEdgeInsets和imageEdgeInsets来实现文字和图片的自由排列</span></span><br><span class="line"><span class="comment"> 注意：这个方法需要在设置图片和文字之后才可以调用，且button的大小要大于 图片大小+文字大小+spacing</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> <span class="doctag">@param</span> position image pisition</span></span><br><span class="line"><span class="comment"> <span class="doctag">@param</span> spacing image &amp; title distance</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)<span class="string">wb_setImagePosition:</span>(WBImagePosition)position</span><br><span class="line"><span class="symbol">                    spacing:</span>(CGFloat)spacing;</span><br></pre></td></tr></table></figure>
</li>
<li><p>按钮点击Block回调（使用较多）</p>
<figure class="highlight nimrod"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> 按钮点击<span class="keyword">block</span>回调</span><br><span class="line"></span><br><span class="line"> @param <span class="keyword">block</span> <span class="keyword">block</span> description</span><br><span class="line"> */</span><br><span class="line">- (<span class="built_in">void</span>)wb_addActionHandler:(<span class="type">WBButtonBlock</span>)<span class="keyword">block</span>;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="UIImageView"><a href="#UIImageView" class="headerlink" title="UIImageView"></a>UIImageView</h4><ul>
<li><p>SDWebImageView设置图片交叉渐变效果</p>
<figure class="highlight nimrod"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> <span class="type">Set</span> imageView image <span class="keyword">with</span> animaton <span class="keyword">type</span> kCATransitionFade.</span><br><span class="line"></span><br><span class="line"> @param url image url <span class="built_in">string</span>.</span><br><span class="line"> @param placeholder placeholder <span class="built_in">string</span>.</span><br><span class="line"> */</span><br><span class="line">- (<span class="built_in">void</span>)wb_setImageWithFadeAnimation:(<span class="type">NSString</span> *)url</span><br><span class="line">                    placeholderImage:(<span class="type">NSString</span> *)placeholder;</span><br></pre></td></tr></table></figure>
</li>
<li><p>异步下载图片并缓存图片</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Set the imageView `image` with an `url` string and a placeholder.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * The download is asynchronous and cached.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> url         The url string for the image.</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> placeholder The image url string to be set initially, until the image request finishes.</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@see</span> sd_setImageWithURL:placeholderImage:options:</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (void)wb_setImageWithURL:(NSString *)url</span><br><span class="line">          placeholderImage:(NSString *)placeholder;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="UIDevice"><a href="#UIDevice" class="headerlink" title="UIDevice"></a>UIDevice</h4><ul>
<li>获取设备uuid<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> also known <span class="keyword">as</span> udid/uniqueDeviceIdentifier <span class="keyword">but</span> this doesn't persists <span class="keyword">to</span> system reset,we can use <span class="keyword">it</span> <span class="keyword">to</span> identifier user.</span><br><span class="line"></span><br><span class="line"> @<span class="literal">return</span> uuid <span class="built_in">string</span>.</span><br><span class="line"> */</span><br><span class="line">- (NSString *)wb_uuid;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="UIImage"><a href="#UIImage" class="headerlink" title="UIImage"></a>UIImage</h4><ul>
<li>根据颜色生成图片（使用较多）<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> Create and return a 1x1 point size image with the given color.</span></span><br><span class="line"><span class="comment"> </span></span><br><span class="line"><span class="comment"> @param color  The color.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">+ (<span class="keyword">nullable</span> <span class="built_in">UIImage</span> *)wb_imageWithColor:(<span class="built_in">UIColor</span> *)color;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="UIColor"><a href="#UIColor" class="headerlink" title="UIColor"></a>UIColor</h4><ul>
<li><p>从十六进制字符串获取颜色（使用较多）</p>
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">/<span class="symbol">*</span><span class="symbol">*</span></span><br><span class="line"> <span class="symbol">*</span>  从十六进制字符串获取颜色</span><br><span class="line"> <span class="symbol">*</span></span><br><span class="line"> <span class="symbol">*</span>  <span class="meta">@param</span> color 支持<span class="meta">@“#123456”、</span> <span class="meta">@“0X123456”、</span> <span class="meta">@“123456”三种格式</span></span><br><span class="line"> <span class="symbol">*</span>  <span class="meta">@param</span> alpha 颜色透明度</span><br><span class="line"> <span class="symbol">*</span>  <span class="meta">@return</span> 十六进制颜色</span><br><span class="line"> <span class="symbol">*</span>/</span><br><span class="line">+ (UIColor <span class="symbol">*</span>)wb_colorWithHexString:(NSString <span class="symbol">*</span>)color</span><br><span class="line">                             alpha:(CGFloat)alpha;</span><br><span class="line">+ (UIColor <span class="symbol">*</span>)wb_colorWithHexString:(NSString <span class="symbol">*</span>)color;</span><br></pre></td></tr></table></figure>
</li>
<li><p>RGB颜色（使用较多）</p>
<figure class="highlight processing"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">+ (UIColor *)wb_rgbColorWithRed:(CGFloat)<span class="built_in">red</span></span><br><span class="line">                          <span class="built_in">green</span>:(CGFloat)<span class="built_in">green</span></span><br><span class="line">                           <span class="built_in">blue</span>:(CGFloat)<span class="built_in">blue</span>;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="UITextView"><a href="#UITextView" class="headerlink" title="UITextView"></a>UITextView</h4><ul>
<li>设置UITextView占位文字（使用较多）<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) IBInspectable <span class="built_in">NSString</span> *placeholder;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) <span class="built_in">NSAttributedString</span> *attributedPlaceholder;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">strong</span>) IBInspectable <span class="built_in">UIColor</span> *placeholderColor;</span><br><span class="line"></span><br><span class="line">+ (<span class="built_in">UIColor</span> *)defaultPlaceholderColor;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="UIViewController"><a href="#UIViewController" class="headerlink" title="UIViewController"></a>UIViewController</h4><ul>
<li>移除系统UITabBarButton，自定义tabbar用到<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> Remove system tabbarButton</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)wb_removeTabbarButton;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="UISearchBar"><a href="#UISearchBar" class="headerlink" title="UISearchBar"></a>UISearchBar</h4><ul>
<li>获取UISearchBar的textField<figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> Get search textField.</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> @return UITextField</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- <span class="comment">(UITextField *)</span>wb_searchField;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="UIBarButtonItem"><a href="#UIBarButtonItem" class="headerlink" title="UIBarButtonItem"></a>UIBarButtonItem</h4><ul>
<li>设置数字提示<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">UIBarButtonItem</span> (<span class="title">WBBadge</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">strong</span>, atomic) <span class="built_in">UILabel</span> *badge;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Badge value to be display</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>) <span class="built_in">NSString</span> *badgeValue;</span><br><span class="line"><span class="comment">// Badge background color</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>) <span class="built_in">UIColor</span> *badgeBGColor;</span><br><span class="line"><span class="comment">// Badge text color</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>) <span class="built_in">UIColor</span> *badgeTextColor;</span><br><span class="line"><span class="comment">// Badge font</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>) <span class="built_in">UIFont</span> *badgeFont;</span><br><span class="line"><span class="comment">// Padding value for the badge</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>) <span class="built_in">CGFloat</span> badgePadding;</span><br><span class="line"><span class="comment">// Minimum size badge to small</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>) <span class="built_in">CGFloat</span> badgeMinSize;</span><br><span class="line"><span class="comment">// Values for offseting the badge over the BarButtonItem you picked</span></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>) <span class="built_in">CGFloat</span> badgeOriginX;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>) <span class="built_in">CGFloat</span> badgeOriginY;</span><br><span class="line"><span class="comment">// In case of numbers, remove the badge when reaching zero</span></span><br><span class="line"><span class="keyword">@property</span> <span class="built_in">BOOL</span> shouldHideBadgeAtZero;</span><br><span class="line"><span class="comment">// Badge has a bounce animation when value changes</span></span><br><span class="line"><span class="keyword">@property</span> <span class="built_in">BOOL</span> shouldAnimateBadge;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="UIView"><a href="#UIView" class="headerlink" title="UIView"></a>UIView</h4><ul>
<li>单击长按手势block回调<figure class="highlight nimrod"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> <span class="type">Add</span> tap gesture <span class="keyword">with</span> <span class="keyword">block</span>.</span><br><span class="line"></span><br><span class="line"> @param handler <span class="keyword">block</span> handler</span><br><span class="line"> */</span><br><span class="line">- (<span class="built_in">void</span>)wb_addTapGestureWithHandler:(<span class="type">WBTapGestureBlock</span>)handler;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> <span class="type">Add</span> long press gusture <span class="keyword">with</span> <span class="keyword">block</span>.</span><br><span class="line"></span><br><span class="line"> @param handler <span class="keyword">block</span> handler</span><br><span class="line"> */</span><br><span class="line">- (<span class="built_in">void</span>)wb_addLongPressGestureWithHandler:(<span class="type">WBLongPressGestureBlock</span>)handler;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="QuartzCore"><a href="#QuartzCore" class="headerlink" title="QuartzCore"></a>QuartzCore</h3><h4 id="CABasicAnimation"><a href="#CABasicAnimation" class="headerlink" title="CABasicAnimation"></a>CABasicAnimation</h4><ul>
<li>点赞动画<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> Praise animation</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)wb_likeAnimation;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="CAKeyframeAnimation"><a href="#CAKeyframeAnimation" class="headerlink" title="CAKeyframeAnimation"></a>CAKeyframeAnimation</h4><ul>
<li><p>spring放大动画</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> Spring animation.</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> <span class="doctag">@param</span> duration 动画时长</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)<span class="string">wb_springAnimation:</span>(NSTimeInterval)duration;</span><br></pre></td></tr></table></figure>
</li>
<li><p>旋转动画</p>
<figure class="highlight erlang"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- <span class="params">(void)</span>wb_rotateXWithAngle:<span class="params">(CGFloat)</span>angle</span><br><span class="line">                   diretion:<span class="params">(WBRotateDiretion)</span>diretion</span><br><span class="line">                   duration:<span class="params">(NSTimeInterval)</span>duration</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="Marco"><a href="#Marco" class="headerlink" title="Marco"></a>Marco</h3><ul>
<li><p>设置平方字体</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**  &lt; 设置平方字体PingFangSC &gt;  */</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> kWB_PFR kWB_SYSTEM_VERSION_9_OR_LATER ? @<span class="meta-string">"PingFangSC-Regular"</span> : @<span class="meta-string">"PingFang SC"</span></span></span><br></pre></td></tr></table></figure>
</li>
<li><p>清除警告宏</p>
<figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** &lt;&lt; 忽略PerformSelector警告 &gt; */</span></span><br><span class="line"><span class="comment">#define SUPPRESS_PerformSelectorLeak_WARNING(Stuff) \</span></span><br><span class="line"><span class="keyword">do</span> &#123; <span class="string">\</span></span><br><span class="line">_Pragma(<span class="string">"clang diagnostic push"</span>) <span class="string">\</span></span><br><span class="line">_Pragma(<span class="string">"clang diagnostic ignored \"-Warc-performSelector-leaks\""</span>) <span class="string">\</span></span><br><span class="line">Stuff; <span class="string">\</span></span><br><span class="line">_Pragma(<span class="string">"clang diagnostic pop"</span>) <span class="string">\</span></span><br><span class="line">&#125; <span class="keyword">while</span> (<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">/** &lt;&lt; 忽略未定义方法警告 &gt; */</span></span><br><span class="line"><span class="comment">#define  SUPPRESS_Undeclaredselector_WARNING(Stuff) \</span></span><br><span class="line"><span class="keyword">do</span> &#123; <span class="string">\</span></span><br><span class="line">_Pragma(<span class="string">"clang diagnostic push"</span>) <span class="string">\</span></span><br><span class="line">_Pragma(<span class="string">"clang diagnostic ignored \"-Wundeclared-selector\""</span>) <span class="string">\</span></span><br><span class="line">Stuff; <span class="string">\</span></span><br><span class="line">_Pragma(<span class="string">"clang diagnostic pop"</span>) <span class="string">\</span></span><br><span class="line">&#125; <span class="keyword">while</span> (<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">/** &lt;&lt; 忽略过期API警告 &gt; */</span></span><br><span class="line"><span class="comment">#define SUPPRESS_DEPRECATED_WARNING(Stuff) \</span></span><br><span class="line"><span class="keyword">do</span> &#123; <span class="string">\</span></span><br><span class="line">_Pragma(<span class="string">"clang diagnostic push"</span>) <span class="string">\</span></span><br><span class="line">_Pragma(<span class="string">"clang diagnostic ignored \"-Wdeprecated-declarations\""</span>) <span class="string">\</span></span><br><span class="line">Stuff; <span class="string">\</span></span><br><span class="line">_Pragma(<span class="string">"clang diagnostic pop"</span>) <span class="string">\</span></span><br><span class="line">&#125; <span class="keyword">while</span> (<span class="number">0</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>iOS 11滚动视图适配</p>
<figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**  &lt; Adaptive  &gt;  */</span></span><br><span class="line"><span class="comment">#define  kWB_AdjustsScrollViewInsets_NO(scrollView,vc)\</span></span><br><span class="line"><span class="keyword">do</span> &#123; <span class="string">\</span></span><br><span class="line">_Pragma(<span class="string">"clang diagnostic push"</span>) <span class="string">\</span></span><br><span class="line">_Pragma(<span class="string">"clang diagnostic ignored \"-Warc-performSelector-leaks\""</span>) <span class="string">\</span></span><br><span class="line"><span class="keyword">if</span> ([UIScrollView instancesRespondToSelector:NSSelectorFromString(@<span class="string">"setContentInsetAdjustmentBehavior:"</span>)]) &#123;<span class="string">\</span></span><br><span class="line">[scrollView   performSelector:NSSelectorFromString(@<span class="string">"setContentInsetAdjustmentBehavior:"</span>) withObject:@(<span class="number">2</span>)];<span class="string">\</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;<span class="string">\</span></span><br><span class="line">vc.automaticallyAdjustsScrollViewInsets = NO;<span class="string">\</span></span><br><span class="line">&#125;<span class="string">\</span></span><br><span class="line">_Pragma(<span class="string">"clang diagnostic pop"</span>) <span class="string">\</span></span><br><span class="line">&#125; <span class="keyword">while</span> (<span class="number">0</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>适配宏</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**  &lt; 屏幕适配 ipone6/6s 控件宽高 字体大小都可以用这个宏 &gt;  */</span></span><br><span class="line"><span class="selector-id">#define</span> <span class="selector-tag">kWB_AUTOLAYOUTSIZE</span>(size) ((size) * (SCREEN_WIDTH / <span class="number">375</span>))</span><br></pre></td></tr></table></figure>
</li>
<li><p>iPhone X相关</p>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**  &lt; 判断是否是iPhone X &gt;  */</span></span><br><span class="line"><span class="selector-id">#define</span> <span class="selector-tag">kWB_IS_IPHONE_X</span> ([UIScreen <span class="attribute">instancesRespondToSelector</span>:<span class="variable">@selector</span>(currentMode)] ? CGSizeEqualToSize(CGSizeMake(<span class="number">1125</span>, <span class="number">2436</span>), [[UIScreen mainScreen] currentMode].size) : NO)</span><br><span class="line"></span><br><span class="line"><span class="comment">/**  &lt; 导航栏高度 无largeTitle &gt;  */</span></span><br><span class="line"><span class="selector-id">#define</span> <span class="selector-tag">kWB_NAVIGATIONBAR_HEIGHT</span> <span class="selector-tag">44</span></span><br><span class="line"><span class="comment">/**  &lt; 状态栏高度 &gt;  */</span></span><br><span class="line"><span class="selector-id">#define</span> <span class="selector-tag">kWB_STATUSBAR_HEIGHT</span> <span class="selector-attr">[UIApplication sharedApplication]</span><span class="selector-class">.statusBarFrame</span><span class="selector-class">.size</span><span class="selector-class">.height</span></span><br><span class="line"><span class="comment">/**  &lt; 整个导航栏高度 &gt;  */</span></span><br><span class="line"><span class="selector-id">#define</span> <span class="selector-tag">kWB_NAVI_HEIGHT</span> (kWB_IS_IPHONE_X ? (<span class="number">88</span>) : (<span class="number">64</span>))</span><br><span class="line"><span class="comment">/**  &lt; 标签栏高度 &gt;  */</span></span><br><span class="line"><span class="selector-id">#define</span> <span class="selector-tag">kWB_TABBAR_HEIGHT</span> (kWB_IS_IPHONE_X ? (<span class="number">83</span>) : (<span class="number">49</span>))</span><br><span class="line"><span class="comment">/**  &lt; iOS 11 底部安全域距离 &gt;  */</span></span><br><span class="line"><span class="selector-id">#define</span> <span class="selector-tag">kWB_BOTTOM_SAFEAREA_HEIGHT</span> (kWB_IS_IPHONE_X ? (<span class="number">34</span>) : (<span class="number">0</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">/**  &lt; 判断 iOS 11 或更高的系统版本 &gt;  */</span></span><br><span class="line"><span class="selector-id">#define</span> <span class="selector-tag">kWB_SYSTEM_VERSION_11_OR_LATER</span> <span class="selector-tag">SYSTEM_VERSION_GREATER_THAN_OR_EQUAL_TO</span>(@<span class="string">"11.0"</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>单例宏定义</p>
<figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**  &lt; 单例ARC&amp;MRC宏定义 &gt;  */</span></span><br><span class="line"><span class="comment">/**  &lt; .h &gt;  */</span></span><br><span class="line"><span class="comment">#define singletonH(name) +(instancetype)share##name;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**  &lt; .m &gt;  */</span></span><br><span class="line"><span class="comment">#if __has_feature(objc_arc)</span></span><br><span class="line"><span class="regexp">//ARC</span></span><br><span class="line"><span class="regexp"><span class="comment">#define singleM(name) static id _instance;\</span></span></span><br><span class="line"><span class="regexp">+(instancetype)allocWithZone:(struct _NSZone *)zone\</span></span><br><span class="line"><span class="regexp">&#123;\</span></span><br><span class="line"><span class="regexp">static dispatch_once_t onceToken;\</span></span><br><span class="line"><span class="regexp">dispatch_once(&amp;onceToken, ^&#123;\</span></span><br><span class="line"><span class="regexp">_instance = [super allocWithZone:zone];\</span></span><br><span class="line"><span class="regexp">&#125;);\</span></span><br><span class="line"><span class="regexp">return _instance;\</span></span><br><span class="line"><span class="regexp">&#125;\</span></span><br><span class="line"><span class="regexp">\</span></span><br><span class="line"><span class="regexp">+(instancetype)share<span class="comment">##name\</span></span></span><br><span class="line"><span class="regexp">&#123;\</span></span><br><span class="line"><span class="regexp">return [[self alloc]init];\</span></span><br><span class="line"><span class="regexp">&#125;\</span></span><br><span class="line"><span class="regexp">-(id)copyWithZone:(NSZone *)zone\</span></span><br><span class="line"><span class="regexp">&#123;\</span></span><br><span class="line"><span class="regexp">return _instance;\</span></span><br><span class="line"><span class="regexp">&#125;\</span></span><br><span class="line"><span class="regexp">\</span></span><br><span class="line"><span class="regexp">-(id)mutableCopyWithZone:(NSZone *)zone\</span></span><br><span class="line"><span class="regexp">&#123;\</span></span><br><span class="line"><span class="regexp">return _instance;\</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp"><span class="comment">#else</span></span></span><br><span class="line"><span class="regexp">//</span>非ARC</span><br><span class="line"><span class="comment">#define singleM static id _instance;\</span></span><br><span class="line">+(instancetype)allocWithZone:(struct _NSZone *)zone<span class="string">\</span></span><br><span class="line">&#123;<span class="string">\</span></span><br><span class="line">static dispatch_once_t onceToken;<span class="string">\</span></span><br><span class="line">dispatch_once(&amp;onceToken, ^&#123;<span class="string">\</span></span><br><span class="line">_instance = [<span class="keyword">super</span> allocWithZone:zone];<span class="string">\</span></span><br><span class="line">&#125;);<span class="string">\</span></span><br><span class="line"><span class="keyword">return</span> _instance;<span class="string">\</span></span><br><span class="line">&#125;<span class="string">\</span></span><br><span class="line"><span class="string">\</span></span><br><span class="line">+(instancetype)shareTools<span class="string">\</span></span><br><span class="line">&#123;<span class="string">\</span></span><br><span class="line"><span class="keyword">return</span> [[self alloc]init];<span class="string">\</span></span><br><span class="line">&#125;<span class="string">\</span></span><br><span class="line">-(id)copyWithZone:(NSZone *)zone<span class="string">\</span></span><br><span class="line">&#123;<span class="string">\</span></span><br><span class="line"><span class="keyword">return</span> _instance;<span class="string">\</span></span><br><span class="line">&#125;<span class="string">\</span></span><br><span class="line">-(id)mutableCopyWithZone:(NSZone *)zone<span class="string">\</span></span><br><span class="line">&#123;<span class="string">\</span></span><br><span class="line"><span class="keyword">return</span> _instance;<span class="string">\</span></span><br><span class="line">&#125;<span class="string">\</span></span><br><span class="line">-(oneway <span class="literal">void</span>)release<span class="string">\</span></span><br><span class="line">&#123;<span class="string">\</span></span><br><span class="line">&#125;<span class="string">\</span></span><br><span class="line"><span class="string">\</span></span><br><span class="line">-(instancetype)retain<span class="string">\</span></span><br><span class="line">&#123;<span class="string">\</span></span><br><span class="line"><span class="keyword">return</span> _instance;<span class="string">\</span></span><br><span class="line">&#125;<span class="string">\</span></span><br><span class="line"><span class="string">\</span></span><br><span class="line">-(NSUInteger)retainCount<span class="string">\</span></span><br><span class="line">&#123;<span class="string">\</span></span><br><span class="line"><span class="keyword">return</span> MAXFLOAT;<span class="string">\</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">#endif</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h3><p>上面这些方法是我在项目中使用的较多的方法，当然分类方法也不止我贴出的这些，有兴趣的朋友可以到我的<a href="https://github.com/wenmobo" target="_blank" rel="noopener">GitHub</a>上查看，<a href="https://github.com/wenmobo/WBCategories" target="_blank" rel="noopener">WBCategories</a>有些分类是我自己写的，如果有写的不对的地方，欢迎批评指正，我也会第一时间修改，如果对你有帮助也请star一个吧。Finally，I will continue update it!</p>

      
    </div>
    
    
    

      <div>
  
    <div>
    
        <div style="text-align:center;color: #ccc;font-size:14px;">-------------本文结束<i class="fa fa-paw"></i>感谢您的阅读-------------</div>
    
</div>

  
      </div>

      <div>
      
        
<div class="my_post_copyright">
  <script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>
  
  <!-- JS库 sweetalert 可修改路径 -->
  <script src="https://cdn.bootcss.com/jquery/2.0.0/jquery.min.js"></script>
  <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
  <p><span>本文标题:</span><a href="/2018/02/12/iOS开发常用分类-WBCategories/">iOS开发常用分类-WBCategories</a></p>
  <p><span>文章作者:</span><a href="/" title="访问 WenBo 的个人博客">WenBo</a></p>
  <p><span>发布时间:</span>2018年02月12日 - 17:02</p>
  <p><span>最后更新:</span>2018年02月12日 - 17:02</p>
  <p><span>原始链接:</span><a href="/2018/02/12/iOS开发常用分类-WBCategories/" title="iOS开发常用分类-WBCategories">http://blogwenbo.com/2018/02/12/iOS开发常用分类-WBCategories/</a>
    <span class="copy-path"  title="点击复制文章链接"><i class="fa fa-clipboard" data-clipboard-text="http://blogwenbo.com/2018/02/12/iOS开发常用分类-WBCategories/"  aria-label="复制成功！"></i></span>
  </p>
  <p><span>许可协议:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank" title="Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0)">署名-非商业性使用-禁止演绎 4.0 国际</a> 转载请保留原文链接及作者。</p>  
</div>
<script> 
    var clipboard = new Clipboard('.fa-clipboard');
    $(".fa-clipboard").click(function(){
      clipboard.on('success', function(){
        swal({   
          title: "",   
          text: '复制成功',
          icon: "success", 
          showConfirmButton: true
          });
    });
    });  
</script>

      
      </div>
      
    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/iOS/" rel="tag"><i class="fa fa-tag"></i> iOS</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/02/12/MAC上iTerm-2安装与使用/" rel="next" title="MAC上iTerm 2安装与使用">
                <i class="fa fa-chevron-left"></i> MAC上iTerm 2安装与使用
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
        <!-- JiaThis Button BEGIN -->
<div class="jiathis_style">
<span class="jiathis_txt">分享到：</span>
<a class="jiathis_button_fav">收藏夹</a>
<a class="jiathis_button_copy">复制网址</a>
<a class="jiathis_button_email">邮件</a>
<a class="jiathis_button_weixin">微信</a>
<a class="jiathis_button_qzone">QQ空间</a>
<a class="jiathis_button_tqq">腾讯微博</a>
<a class="jiathis_button_douban">豆瓣</a>
<a class="jiathis_button_share">一键分享</a>

<a href="http://www.jiathis.com/share?uid=2140465" class="jiathis jiathis_txt jiathis_separator jtico jtico_jiathis" target="_blank">更多</a>
<a class="jiathis_counter_style"></a>
</div>
<script type="text/javascript" >
var jiathis_config={
  data_track_clickback:true,
  summary:"",
  shortUrl:false,
  hideMore:false
}
</script>
<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js?uid=" charset="utf-8"></script>
<!-- JiaThis Button END -->
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
      <div id="lv-container" data-id="city" data-uid="MTAyMC8zMzQyMy85OTc5"></div>
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="https://upload.jianshu.io/users/upload_avatars/3072214/ccbcba49-0a5c-4b7e-b1e4-aea15ab4419f.png?imageMogr2/auto-orient/strip|imageView2/1/w/240/h/240"
                alt="WenBo" />
            
              <p class="site-author-name" itemprop="name">WenBo</p>
              <p class="site-description motion-element" itemprop="description">To strive, to seek, to find, and not to yield.</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">12</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/archives/index.html">
                  <span class="site-state-item-count">4</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">9</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/wenmobo" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://www.jianshu.com/u/63445e24e8bf" target="_blank" title="简书">
                      
                        <i class="fa fa-fw fa-heartbeat"></i>简书</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://juejin.im/user/5a371ae551882512d0607108" target="_blank" title="掘金">
                      
                        <i class="fa fa-fw fa-spinner"></i>掘金</a>
                  </span>
                
            </div>
          

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-inline">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                推荐阅读
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="https://developer.apple.com/swift/" title="Swift 4" target="_blank">Swift 4</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://developer.apple.com/documentation/objectivec" title="Objective-C" target="_blank">Objective-C</a>
                  </li>
                
              </ul>
            </div>
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#前言"><span class="nav-number">1.</span> <span class="nav-text">前言</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#WBCategories"><span class="nav-number">2.</span> <span class="nav-text">WBCategories</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#常用分类方法"><span class="nav-number">3.</span> <span class="nav-text">常用分类方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Foundation"><span class="nav-number">4.</span> <span class="nav-text">Foundation</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#NSString"><span class="nav-number">4.1.</span> <span class="nav-text">NSString</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#NSObject"><span class="nav-number">4.2.</span> <span class="nav-text">NSObject</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#NSDate"><span class="nav-number">4.3.</span> <span class="nav-text">NSDate</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#UIKit"><span class="nav-number">5.</span> <span class="nav-text">UIKit</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#UINavigationItem"><span class="nav-number">5.1.</span> <span class="nav-text">UINavigationItem</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#UIButton"><span class="nav-number">5.2.</span> <span class="nav-text">UIButton</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#UIImageView"><span class="nav-number">5.3.</span> <span class="nav-text">UIImageView</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#UIDevice"><span class="nav-number">5.4.</span> <span class="nav-text">UIDevice</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#UIImage"><span class="nav-number">5.5.</span> <span class="nav-text">UIImage</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#UIColor"><span class="nav-number">5.6.</span> <span class="nav-text">UIColor</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#UITextView"><span class="nav-number">5.7.</span> <span class="nav-text">UITextView</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#UIViewController"><span class="nav-number">5.8.</span> <span class="nav-text">UIViewController</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#UISearchBar"><span class="nav-number">5.9.</span> <span class="nav-text">UISearchBar</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#UIBarButtonItem"><span class="nav-number">5.10.</span> <span class="nav-text">UIBarButtonItem</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#UIView"><span class="nav-number">5.11.</span> <span class="nav-text">UIView</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#QuartzCore"><span class="nav-number">6.</span> <span class="nav-text">QuartzCore</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#CABasicAnimation"><span class="nav-number">6.1.</span> <span class="nav-text">CABasicAnimation</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#CAKeyframeAnimation"><span class="nav-number">6.2.</span> <span class="nav-text">CAKeyframeAnimation</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Marco"><span class="nav-number">7.</span> <span class="nav-text">Marco</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#结语"><span class="nav-number">8.</span> <span class="nav-text">结语</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart" aria-hidden="true"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">WenBo</span>

<!--
  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
      <span class="post-meta-item-text">Site words total count&#58;</span>
    
    <span title="Site words total count">17.2k</span>
  
-->

</div>

<div class="powered-by">
<i class="fa fa-user-md"></i><span id="busuanzi_container_site_uv">
  访问用户：<span id="busuanzi_value_site_uv"></span>
</span>
</div>

<span class="post-meta-divider">|</span>

<div class="powered-by">
<i class="fa fa-eye" aria-hidden="true"></i><span id="busuanzi_container_site_uv">
  浏览量：<span id="busuanzi_value_site_pv"></span>
</span>
</div>

<!--
<span class="post-meta-divider">|</span>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Mist</a> v5.1.4</div>



-->

<span class="post-meta-divider">|</span>
<div class="theme-info">
  <div class="powered-by"></div>
  <i class="fa fa-pencil-square-o" aria-hidden="true"></i>
  <span class="post-count">博客全站共17.2k字</span>
</div>

        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  
    <script type="text/javascript">
      (function(d, s) {
        var j, e = d.getElementsByTagName(s)[0];
        if (typeof LivereTower === 'function') { return; }
        j = d.createElement(s);
        j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
        j.async = true;
        e.parentNode.insertBefore(j, e);
      })(document, 'script');
    </script>
  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
  <script>AV.initialize("dSEzksBvVcKjRW17O9ks40ew-gzGzoHsz", "taC3ykH1rlOMjksjEwxBBYDF");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  

  
  

  

  

  

</body>
</html>
